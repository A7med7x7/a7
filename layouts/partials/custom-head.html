<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
<link href="https://db.onlinewebfonts.com/c/e08e1402197c87523c042e4fcb918b83?family=WarnockPro-Regular" rel="stylesheet" type="text/css"/>

<!-- Open Graph / Facebook -->
<meta property="og:type" content="{{ if .IsPage }}article{{ else }}website{{ end }}">
<meta property="og:url" content="{{ .Permalink }}">
<meta property="og:title" content="{{ .Title }}">
<meta property="og:description" content="{{ with .Description }}{{ . }}{{ else }}{{ if .IsPage }}{{ .Summary }}{{ else }}{{ .Site.Params.SiteDescription }}{{ end }}{{ end }}">

{{/* Dynamic Image Generation using Tailgraph */}}
{{ $ogImage := "" }}
{{- with .Params.images -}}
  {{/* Use custom image if provided in frontmatter */}}
  {{ $ogImage = index . 0 | absURL }}
{{- else -}}
  {{/* Generate a custom card image dynamically */}}
  {{ $title := .Title }}
  {{/* Clean up the summary: remove HTML tags, decode entities, and truncate */}}
  {{ $summary := .Summary | plainify | htmlUnescape | truncate 160 }}
  {{/* Get the publication date */}}
  {{ $date := .Date.Format "January 2, 2006" }}
  
  {{/* Construct the Tailgraph URL */}}
  {{ $baseUrl := "https://og.tailgraph.com/og" }}
  
  {{ $qs := querify 
      "fontFamily" "Inter"
      "title" $title
      "titleTailwind" "text-7xl font-extrabold text-gray-900 text-left leading-tight mb-8 border-l-8 border-teal-500 pl-8"
      "text" $summary
      "textTailwind" "text-xl text-gray-600 text-left mt-4 leading-relaxed pl-8 mb-8"
      "containerTailwind" "flex flex-col items-start justify-center w-full h-full bg-white py-20 px-12"
      "bgUrl" ""
      "bgTailwind" "bg-white"
      "footer" $date
      "footerTailwind" "text-base text-gray-500 text-left pl-8 mt-auto"
  }}
  
  {{ $ogImage = printf "%s?%s" $baseUrl $qs }}
{{- end -}}

<meta property="og:image" content="{{ $ogImage }}">

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="{{ .Permalink }}">
<meta property="twitter:title" content="{{ .Title }}">
<meta property="twitter:description" content="{{ with .Description }}{{ . }}{{ else }}{{ if .IsPage }}{{ .Summary }}{{ else }}{{ .Site.Params.SiteDescription }}{{ end }}{{ end }}">
<meta property="twitter:image" content="{{ $ogImage }}">
